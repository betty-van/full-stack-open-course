{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Betty Van\\\\Documents\\\\Learn-Programming\\\\fullStackOpen\\\\full-stack-open-part-2-phonebook\\\\phonebook-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\Betty Van\\\\Documents\\\\Learn-Programming\\\\fullStackOpen\\\\full-stack-open-part-2-phonebook\\\\phonebook-app\\\\src\\\\components\\\\PersonForm.js\";\nimport React from 'react';\nimport personsService from '../services/persons';\n\nconst PersonForm = ({\n  persons,\n  newName,\n  newNumber,\n  setNewName,\n  setNewNumber,\n  setPersons,\n  setErrorMessage,\n  setSuccessMessage\n}) => {\n  // To add name\n  const addName = event => {\n    // No reload\n    event.preventDefault(); // Take out names into an array\n\n    const names = persons.map(person => person.name); // If name matches, then do not add to list\n\n    if (names.indexOf(newName) !== -1) {\n      const result = window.confirm(`${newName} already exists in the phonebook, replace the old number with a new one?`);\n      const thisPerson = persons.find(p => p.name === newName);\n\n      const changedPerson = _objectSpread({}, thisPerson, {\n        number: newNumber\n      });\n\n      if (result === true) {\n        personsService.update(thisPerson.id, changedPerson).then(response => {\n          console.log(response);\n          setPersons(persons.map(person => person.id !== thisPerson.id ? person : response));\n          setSuccessMessage(`Updated '${newName} ${newNumber}' `);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 5000);\n        }).catch(error => {\n          setErrorMessage(`Unable to change number of '${thisPerson.name}'`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n        setNewName('');\n        setNewNumber('');\n      }\n    } // If name does not exist, add to list\n    else if (names.indexOf(newName) === -1) {\n        const nameObject = {\n          name: newName,\n          number: newNumber\n        };\n        personsService.create(nameObject).then(response => {\n          setPersons(persons.concat(response));\n          setNewName('');\n          setNewNumber('');\n          setSuccessMessage(`Added '${newName} ${newNumber}' `);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 5000);\n        }).catch(error => {\n          setErrorMessage(`Unable to add '${newName}'`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n      }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"form\", {\n    onSubmit: addName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"name: \", React.createElement(\"input\", {\n    value: newName,\n    onChange: handleNameChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"number: \", React.createElement(\"input\", {\n    value: newNumber,\n    onChange: handleNumberChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"add\"))));\n};\n\nexport default PersonForm;","map":{"version":3,"sources":["C:/Users/Betty Van/Documents/Learn-Programming/fullStackOpen/full-stack-open-part-2-phonebook/phonebook-app/src/components/PersonForm.js"],"names":["React","personsService","PersonForm","persons","newName","newNumber","setNewName","setNewNumber","setPersons","setErrorMessage","setSuccessMessage","addName","event","preventDefault","names","map","person","name","indexOf","result","window","confirm","thisPerson","find","p","changedPerson","number","update","id","then","response","console","log","setTimeout","catch","error","nameObject","create","concat","handleNameChange","target","value","handleNumberChange"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport personsService from '../services/persons'\r\n\r\nconst PersonForm = ({persons, newName, newNumber, setNewName, setNewNumber, setPersons, setErrorMessage, setSuccessMessage }) => {\r\n\r\n    // To add name\r\n    const addName = (event) => {\r\n        // No reload\r\n        event.preventDefault()\r\n        \r\n        // Take out names into an array\r\n        const names = persons.map(person => person.name)\r\n\r\n        // If name matches, then do not add to list\r\n        if (names.indexOf(newName) !== -1) {\r\n            const result = window.confirm(`${newName} already exists in the phonebook, replace the old number with a new one?`)\r\n            const thisPerson = persons.find(p => p.name === newName)\r\n            const changedPerson = {...thisPerson, number: newNumber}\r\n            \r\n            if (result === true) {\r\n                personsService\r\n                    .update(thisPerson.id, changedPerson)\r\n                    .then(response => {\r\n                        console.log(response)\r\n                        setPersons(persons.map(person => person.id !== thisPerson.id ? person : response))\r\n\r\n                        setSuccessMessage(\r\n                            `Updated '${newName} ${newNumber}' `\r\n                        )\r\n                        setTimeout(() => {\r\n                            setSuccessMessage(null)\r\n                        }, 5000)\r\n                    })\r\n                    .catch(error => {\r\n                        setErrorMessage(\r\n                            `Unable to change number of '${thisPerson.name}'`\r\n                        )\r\n                        setTimeout(() => {\r\n                            setErrorMessage(null)\r\n                        }, 5000)\r\n                    })\r\n\r\n                setNewName('')\r\n                setNewNumber('')\r\n            }\r\n        }\r\n        // If name does not exist, add to list\r\n        else if (names.indexOf(newName) === -1) {\r\n            const nameObject = {\r\n                name: newName,\r\n                number: newNumber\r\n            }\r\n\r\n            personsService\r\n                .create(nameObject)\r\n                .then(response => {\r\n                    setPersons(persons.concat(response))\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n\r\n                    setSuccessMessage(\r\n                        `Added '${newName} ${newNumber}' `\r\n                    )\r\n                    setTimeout(() => {\r\n                        setSuccessMessage(null)\r\n                    }, 5000)\r\n                    })\r\n                .catch(error => {\r\n                    setErrorMessage(\r\n                        `Unable to add '${newName}'`\r\n                    )\r\n                    setTimeout(() => {\r\n                        setErrorMessage(null)\r\n                    }, 5000)\r\n                })\r\n            } \r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={addName}>\r\n                <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </div>\r\n                <div>number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PersonForm"]},"metadata":{},"sourceType":"module"}